{% extends 'base.html' %} {% block title %}
<title>private-messages</title>
{% endblock %} {% block body %}
<div class="main-container_p">

    <div class="bookroom-header">
      <h1>PRIVATE</h1> 
      <div class="message-group">
      <div class ="bookroom-contents">
      <p class="bookroom-name">{{ bookroom.name | default("ãƒ–ãƒƒã‚¯ãƒ«ãƒ¼ãƒ ã®åå‰") }}</p>
        <p class="bookroom-description">{{bookroom.description | default("ãƒ–ãƒƒã‚¯ãƒ«ãƒ¼ãƒ ã®è©³ç´°") }}</p>
      </div>
      {% if bookroom.description is not none %}
      <span class="tag-category">
          ä»®ã‚¿ã‚°
        </span>
      
     {% endif %}{% if bookroom.user_id == uid %}
      <button class="update-bookroom-button" id="update-bookroom-button">
        <img src="{{ url_for('static', filename='img/pen.png') }}" alt="ã‚¢ã‚¤ã‚³ãƒ³" >
      </button>
     {% include 'private_modal/update-private-bookroom.html' %} {% endif %}
      </div>
    </div>  
    <div id="message-area">
      {% if messages|length > 0 %} {% for message in messages %} {% if
      message.user_id == uid %}
    <div class="my-messages">
      <div class="message-and-trash-right">
        <p class="box box-right">{{ message.message }}</p>
         <form class ="delete-form" action="/private_bookrooms/{{ bookroom.id }}/messages/{{ message.id }}" method="POST">
        <input type="hidden" name="_method" value="DELETE"> 
      
         <button type="submit" class="delete-message-button">
        <img src="{{ url_for('static', filename='img/trash-can.png') }}" alt="ã‚¢ã‚¤ã‚³ãƒ³" >
         </button>
      </form>  
      <span class="timestamp timestamp-right">2025/10/28 16:54</span>
      </div>
            <div class="reaction-zone reaction-zone-left">
            </div>   
      </div> 
      {% else %}
    <div class="messages">
      <div class="message-content-wrapper">
        <p class="user-name">{{message.user_name | default("ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ¼ãƒ ")}}</p>
         <div class="icon-and-message-left">
          <img class="user-icon" src="{{message.icon_image}}" alt="ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³">
          <p class="box box-left">{{message.message| default("ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ†ãƒ¼ãƒ–ãƒ«ã®å†…å®¹")}}</p>
         </div> 
          <span class="timestamp timestamp-left">2025/10/28 16:54</span>
            <div class="reaction-zone reaction-zone-left">
              <button class="reaction-item">
                ğŸ‘ <span class="reaction-count">5</span></button>
              <button class="reaction-item">
                ğŸ˜‚ <span class="reaction-count">2</span></button>
              <button class="reaction-item">
                ğŸ˜ <span class="reaction-count">1</span></button>
            </div>
        </div>  
     </div> 
      {% endif %} {% endfor %} {% else %}
      <p id="no-message">ã¾ã ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚Šã¾ã›ã‚“</p>
      {% endif %}
    </div>
    <div class="typing-box-wrapper">
      <form class="typing-box" method="POST" name="newMessageForm">
        <textarea name="message" id="message" autofocus></textarea>
        <input type="hidden" name="bookroom_id" value="{{bookroom.id}}" />
        <button type="submit" id="add-message-button">
          <img src="{{ url_for('static', filename='img/pen.png') }}" alt="ã‚¢ã‚¤ã‚³ãƒ³" />
        </button>
      </form>
    </div>
</div>
{% endblock %} {% block script %}
<script type="text/javascript">
  // prettier-ignore
  const uid = JSON.parse('{{ uid|tojson }}');
</script>
<script
  src="{{url_for('static',filename='js/scroll-message.js')}}"
  type="text/javascript"
></script>
<script
  src="{{url_for('static',filename='js/bookroom/update-bookroom.js')}}"
  type="text/javascript"
></script>
{% endblock %}
